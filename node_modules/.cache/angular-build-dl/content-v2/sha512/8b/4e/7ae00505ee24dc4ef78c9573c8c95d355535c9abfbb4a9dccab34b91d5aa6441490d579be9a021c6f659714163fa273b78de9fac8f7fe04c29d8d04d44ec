{"version":3,"sources":["./src/app/firebase/auth/profile/firebase-profile-can-activate.guard.ts","./src/app/firebase/auth/profile/firebase-profile.module.ts","./src/app/firebase/auth/profile/firebase-profile.page.html","./src/app/firebase/auth/profile/firebase-profile.page.ts","./src/app/firebase/auth/profile/firebase-profile.resolver.ts","./src/app/utils/resolver-helper.ts"],"names":[],"mappings":";;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAsD;AACS;AAGxD,MAAM,wBAAwB;IAEnC,YACU,mBAAwC,EACxC,MAAc;QADd,wBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,WAAM,GAAN,MAAM,CAAQ;IACrB,CAAC;IAEJ,WAAW;QACT,iCAAiC;QACjC,IAAI,IAAI,CAAC,mBAAmB,CAAC,eAAe,EAAE,IAAI,IAAI,EAAE;YACtD,OAAO,IAAI,CAAC;SACb;aAAM;YACL,6BAA6B;YAC7B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC;YAChD,OAAO,KAAK,CAAC;SACd;IACH,CAAC;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuD;AAG0B;AACnB;AACQ;WAQ1D,kFAAuB;AANnC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,0EAAmB;QAC9B,WAAW,EAAE,CAAC,6FAAwB,CAAC;QACvC,OAAO,EAAE;YACP,IAAI,IAAyB;SAC9B;KACF;CACF,CAAC;AAmBK,MAAM,yBAAyB;CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yGCtCzC,6pBAAkC,IAChC,ooBAAa,IACX,qpBAA0B,IACxB;;;k8BAAqD,IAK3D,kqBAAkC,IAChC,snBAAS,IACP,ipBAAgC,IAC9B,mwBAAgI,IAC9H,6jBAAuC,GAArB,mEAAoB,MAM5C,gpBAA8B,IAC5B,kqBAAgD,IAC9C,0IAAsB,KACpB,+iBAAoC,IACpC,ytBAAsD,IAExD,4IAAwB,KACtB,+iBAAoC,IAEtC,gJAA4B,KAC1B,6jBAAqD,IAK3D,4pBAA0C,IACxC,qpBAAmB,IACjB,gJAA4B,mFAAM,MAElC,gJAA4B,KAC1B,+iBAA2C,IAG/C,qpBAAmB,IACjB,gJAA4B,kFAAK,MACjC,gJAA4B,KAC1B,+iBAAqC,IAGzC,qpBAAmB,IACjB,gJAA4B,0FAAa,MACzC,gJAA4B,KAC1B,+iBAAwC,IAG5C,qpBAAmB,IACjB,6QAAuG,YAApB;;wBAAmB;MAAtG,2lBAAuG,iFAAQ,mDAnD9F,uCAAmC,EAApD,YAAqD,EAApC,mDAAmC,EAApD,YAAqD,EAApC,SAAmC,GAQJ,uBAAmB,EAAqB,mBAAkB,aAAC,4BAAoB,EAA/H,aAAgI,EAAhF,SAAmB,EAAqB,SAAkB,EAAC,SAAoB,GAC3G,mCAAoB,GAAtC,aAAuC,EAArB,SAAoB,GAStB,iDAAmB,aAAnC,aAAoC,EAApB,UAAmB,GACD,8BAAmB,EAA3C,mCAAuB,EAAjC,aAAsD,EAApB,UAAmB,EAA3C,UAAuB,GAGjB,iDAAmB,aAAnC,aAAoC,EAApB,UAAmB,GAGT,iDAA0B,oBAApD,aAAqD,EAA3B,UAA0B,GAM/C,qBAAS,EAAlB,aAAmB,EAAV,UAAS,GAIE,iDAA0B,oBAA1C,aAA2C,EAA3B,UAA0B,GAGrC,qBAAS,EAAlB,aAAmB,EAAV,UAAS,GAGE,iDAAoB,cAApC,aAAqC,EAArB,UAAoB,GAG/B,qBAAS,EAAlB,aAAmB,EAAV,UAAS,GAGE,iDAAuB,iBAAvC,aAAwC,EAAxB,UAAuB,GAGlC,qBAAS,EAAlB,aAAmB,EAAV,UAAS,GAC+C,8BAAmB,EAAjD,wBAAc,EAAC,0BAAc,EAA9D,aAAuG,EAAxC,UAAmB,EAAjD,UAAc,EAAC,UAAc,2BA3C9D,sTAAgI,GAC9H,iHAAuC,GASvC,iHAAoC,GAIpC,iHAAoC,GAGpC,iHAAqD,GAUrD,iHAA2C,GAM3C,iHAAqC,GAMrC,iHAAwC;;;;;;;;;;;;;;;;ACjDhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyD;AACO;AACD;AAEqB;AAU7E,MAAM,mBAAmB;IAS9B,YACU,MAAc,EACd,KAAqB,EACtB,WAAgC;QAF/B,WAAM,GAAN,MAAM,CAAQ;QACd,UAAK,GAAL,KAAK,CAAgB;QACtB,gBAAW,GAAX,WAAW,CAAqB;IACtC,CAAC;IARJ,IAAmC,OAAO;QACxC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;IACzD,CAAC;IAQD,QAAQ;QACN,6DAA6D;QAC7D,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI;aACnC,SAAS,CACR,CAAC,iBAA2D,EAAE,EAAE;YAC9D,oHAAoH;YACpH,IAAI,CAAC,aAAa,GAAG,qEAAc,CAAC,WAAW,CAAuB,iBAAiB,CAAC,IAAI,EAAE,4EAAoB,CAAC;iBAClH,SAAS,CACR,CAAC,KAAK,EAAE,EAAE;gBACR,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;YACpB,CAAC,EACD,CAAC,KAAK,EAAE,EAAE,GAAE,CAAC,CACd,CAAC;QACJ,CAAC,EACD,CAAC,KAAK,EAAE,EAAE,GAAE,CAAC,CACd,CAAC;IACJ,CAAC;IAED,OAAO;QACL,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE;YACxC,uBAAuB;YACvB,uEAAuE;YACvE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,uBAAuB,CAAC,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;QACxE,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE;YACX,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,uFAAuF;IACvF,0HAA0H;IAC1H,gBAAgB;QACd,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;IACnC,CAAC;CACF;;;;;;;;;;;;;AC7DD;AAAA;AAAA;AAA+D;AAMxD,MAAM,uBAAuB;IAElC,YAAoB,mBAAwC;QAAxC,wBAAmB,GAAnB,mBAAmB,CAAqB;IAAG,CAAC;IAEhE,OAAO;QACL,MAAM,UAAU,GAAqC,IAAI,CAAC,mBAAmB,CAAC,oBAAoB,EAAE,CAAC;QACrG,MAAM,SAAS,GAAoC,IAAI,CAAC,mBAAmB,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;QACxG,OAAO,SAAS,CAAC;IACnB,CAAC;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBD;AAAA;AAAA;AAAA;AAAgD;AACV;AAM/B,MAAM,cAAc;IACzB,8GAA8G;IACvG,MAAM,CAAC,WAAW,CAAI,MAA0B,EAAE,WAAuC;QAC9F,IAAI,MAAM,YAAY,2DAAS,EAAE;YAC/B,OAAO,MAAM,CAAC,KAAK,CAAC;SACrB;aAAM,IAAI,MAAM,YAAY,WAAW,EAAE;YACxC,sHAAsH;YACtH,4FAA4F;YAC5F,6DAA6D;YAC7D,OAAO,+CAAE,CAAC,MAAM,CAAC,CAAC;SACnB;IACH,CAAC;CACF","file":"profile-firebase-profile-module-ngfactory-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { FirebaseAuthService } from '../firebase-auth.service';\n\n@Injectable()\nexport class FirebaseProfilePageGuard implements CanActivate {\n\n  constructor(\n    private firebaseAuthService: FirebaseAuthService,\n    private router: Router\n  ) {}\n\n  canActivate(): boolean {\n    // check if user is authenticated\n    if (this.firebaseAuthService.getLoggedInUser() != null) {\n      return true;\n    } else {\n      // Navigate to the login page\n      this.router.navigate(['firebase/auth/sign-in']);\n      return false;\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { ComponentsModule } from '../../../components/components.module';\nimport { FirebaseProfilePageGuard } from './firebase-profile-can-activate.guard';\nimport { FirebaseProfilePage } from './firebase-profile.page';\nimport { FirebaseProfileResolver } from './firebase-profile.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FirebaseProfilePage,\n    canActivate: [FirebaseProfilePageGuard],\n    resolve: {\n      data: FirebaseProfileResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule\n  ],\n  declarations: [\n    FirebaseProfilePage\n  ],\n  providers: [\n    FirebaseProfilePageGuard,\n    FirebaseProfileResolver\n  ]\n})\nexport class FirebaseProfilePageModule {}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"firebase/auth/sign-in\"></ion-back-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"user-content\">\n  <ion-row>\n    <ion-col class=\"ion-no-padding\">\n      <app-image-shell class=\"user-image add-overlay\" [display]=\"'cover'\" animation=\"spinner\" [src]=\"user.image\" [alt]=\"'item image'\">\n        <app-aspect-ratio [ratio]=\"{w:1, h:1}\">\n        </app-aspect-ratio>\n      </app-image-shell>\n    </ion-col>\n  </ion-row>\n\n  <ion-row class=\"user-details\">\n    <ion-col class=\"ion-no-padding details-wrapper\">\n      <h2 class=\"user-name\">\n        <app-text-shell [data]=\"user?.name\"></app-text-shell>\n        <ion-icon name=\"checkmark-circle\" color=\"bright-pink\"></ion-icon>\n      </h2>\n      <span class=\"user-role\">\n        <app-text-shell [data]=\"user?.role\"></app-text-shell>\n      </span>\n      <p class=\"user-description\">\n        <app-text-shell lines=\"3\" [data]=\"user?.description\"></app-text-shell>\n      </p>\n    </ion-col>\n  </ion-row>\n\n  <ion-row class=\"user-preferences-wrapper\">\n    <ion-col size=\"12\">\n      <h4 class=\"preference-name\">Mobile</h4>\n      <!-- TODO: Incluir un pipe que muestre el valor con forrmato de telefono -->\n      <p class=\"preference-value\">\n        <app-text-shell [data]=\"user?.phoneNumber\"></app-text-shell>\n      </p>\n    </ion-col>\n    <ion-col size=\"12\">\n      <h4 class=\"preference-name\">Email</h4>\n      <p class=\"preference-value\">\n        <app-text-shell [data]=\"user?.email\"></app-text-shell>\n      </p>\n    </ion-col>\n    <ion-col size=\"12\">\n      <h4 class=\"preference-name\">Auth Provider</h4>\n      <p class=\"preference-value\">\n        <app-text-shell [data]=\"user?.provider\"></app-text-shell>\n      </p>\n    </ion-col>\n    <ion-col size=\"12\">\n      <ion-button class=\"sign-out-btn\" expand=\"block\" fill=\"outline\" color=\"bright-blue\" (click)=\"signOut()\">Sign out</ion-button>\n    </ion-col>\n  </ion-row>\n</ion-content>\n","import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FirebaseProfileModel } from './firebase-profile.model';\nimport { FirebaseAuthService } from '../firebase-auth.service';\nimport { Subscription } from 'rxjs';\nimport { IResolvedRouteData, ResolverHelper } from '../../../utils/resolver-helper';\n\n@Component({\n  selector: 'app-firebase-profile',\n  templateUrl: './firebase-profile.page.html',\n  styleUrls: [\n    './styles/firebase-profile.page.scss',\n    './styles/firebase-profile.shell.scss'\n  ]\n})\nexport class FirebaseProfilePage implements OnInit {\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\n  subscriptions: Subscription;\n  user: FirebaseProfileModel;\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.user && this.user.isShell) ? true : false;\n  }\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    public authService: FirebaseAuthService\n  ) {}\n\n  ngOnInit() {\n    // On init, the route subscription is the active subscription\n    this.subscriptions = this.route.data\n    .subscribe(\n      (resolvedRouteData: IResolvedRouteData<FirebaseProfileModel>) => {\n        // Route subscription resolved, now the active subscription is the Observable extracted from the resolved route data\n        this.subscriptions = ResolverHelper.extractData<FirebaseProfileModel>(resolvedRouteData.data, FirebaseProfileModel)\n        .subscribe(\n          (state) => {\n            this.user = state;\n          },\n          (error) => {}\n        );\n      },\n      (error) => {}\n    );\n  }\n\n  signOut() {\n    this.authService.signOut().subscribe(() => {\n      // Sign-out successful.\n      // Replace state as we are no longer authorized to access profile page.\n      this.router.navigate(['firebase/auth/sign-in'], { replaceUrl: true });\n    }, (error) => {\n      console.log('signout error', error);\n    });\n  }\n\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\n  ionViewWillLeave(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { FirebaseAuthService } from '../firebase-auth.service';\nimport { Observable } from 'rxjs';\nimport { DataStore } from '../../../shell/data-store';\nimport { FirebaseProfileModel } from './firebase-profile.model';\n\n@Injectable()\nexport class FirebaseProfileResolver implements Resolve<any> {\n\n  constructor(private firebaseAuthService: FirebaseAuthService) {}\n\n  resolve() {\n    const dataSource: Observable<FirebaseProfileModel> = this.firebaseAuthService.getProfileDataSource();\n    const dataStore: DataStore<FirebaseProfileModel> = this.firebaseAuthService.getProfileStore(dataSource);\n    return dataStore;\n  }\n}\n","import { DataStore } from '../shell/data-store';\nimport { Observable, of } from 'rxjs';\n\nexport interface IResolvedRouteData<T> {\n  data: T | DataStore<T>;\n}\n\nexport class ResolverHelper<T> {\n  // More info on function overloads here: https://www.typescriptlang.org/docs/handbook/functions.html#overloads\n  public static extractData<T>(source: (T | DataStore<T>), constructor: (new(...args: any[]) => T)): Observable<T> {\n    if (source instanceof DataStore) {\n      return source.state;\n    } else if (source instanceof constructor) {\n      // The right side of instanceof should be an expression evaluating to a constructor function (ie. a class), not a type\n      // That's why we included an extra parameter which acts as a constructor function for type T\n      // (see: https://github.com/microsoft/TypeScript/issues/5236)\n      return of(source);\n    }\n  }\n}\n"],"sourceRoot":"webpack:///"}