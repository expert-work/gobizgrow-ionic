{"version":3,"sources":["webpack:///src/app/common/expense-categories/expense-categories.page.ts"],"names":["ExpenseCategoriesPage","router","menu","authService","apisService","storageService","toastService","navParams","modalController","items","x","page","last_page","numTimesLeft","category","get","console","log","loading","userData$","subscribe","res","displayUserData","q","auth_token","undefined","loadItems","event","setTimeout","target","complete","form","FormData","append","toString","expenseCategories","result","data","total","push","sortArray","error","status","presentToast","evt","srcElement","value","create","component","backdropDismiss","modal","onDidDismiss","then","isDefined","id","present","item","expense_category_id","name","dismiss"],"mappings":"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","file":"common-expense-categories-expense-categories-module-ngfactory-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { NavParams, ModalController } from '@ionic/angular';\nimport { Validators, FormGroup, FormControl } from '@angular/forms';\nimport { Router } from '@angular/router';\n\nimport { MenuController } from '@ionic/angular';\nimport { AuthService } from '../../services/auth.service'\nimport { ApisService } from '../../services/apis.service'\n\nimport { StorageService } from '../../services/storage.service';\nimport { ToastService } from '../../services/toast.service';\nimport { NewPage } from '../../expense-categories/new/new.page'\n\n\n@Component({\n  selector: 'app-expense-categories',\n  templateUrl: './expense-categories.page.html',\n  styleUrls: [\n    './expense-categories.page.scss',\n    '../../style/listing.ios.scss',\n    '../../style/listing.page.scss',\n    '../../style/listing.shell.scss'\n  ],\n})\nexport class ExpenseCategoriesPage implements OnInit {\n  displayUserData:any;\n  category:any;\n  loading:boolean;\n  constructor(\n    public router: Router,\n    public menu: MenuController,\n    private authService: AuthService,\n    private apisService:ApisService,\n     private storageService: StorageService,\n    private toastService: ToastService,\n    navParams: NavParams,\n    public modalController: ModalController\n  ) {\n    this.category=navParams.get('data');\n\n    console.log('popup open start');\n    console.log(this.category);\n    console.log('popup open end');\n    this.loading=true;\n\n  }\n  q:any\n  items = [];  \n  x= 0;\n  page=1;\n  last_page=0;\n  numTimesLeft = 5;  \n   \n  ngOnInit(){\n   this.authService.userData$.subscribe((res:any) => {\n     this.displayUserData=res\n     this.q='';\n     if (this.displayUserData.auth_token !== undefined) { this.loadItems(); }\n   })\n  \n\n  }\n\n  loadData(event) {  \n   setTimeout(() => {  \n     this.loadItems();  \n     this.numTimesLeft -= 1;  \n     event.target.complete();  \n   }, 500);  \n }  \n loadItems() {  \n    let form = new FormData();\n        form.append('page',this.page.toString() );\n        form.append('q',this.q );\n        form.append('auth_token',this.displayUserData.auth_token);\n         this.apisService.expenseCategories(form).subscribe((result: any) => {\n          this.loading=false;\n            if(result.data.total){\n              this.page= this.page+1;\n              this.items.push(...result.data.data)\n              this.items=this.apisService.sortArray(this.items);\n            }else{\n\n            }\n         },\n          (error: any)=>{\n            if(error.status==0){\n              this.toastService.presentToast('Connection failed');\n            }\n            if(error.status==401){\n              this.toastService.presentToast('Authentcation failed');\n            }\n          }  \n   ) \n } \n searchBox(evt){\n   this.q= evt.srcElement.value;\n   this.page=1;\n   this.items = [];\n   this.loadItems()\n }\n\n async newModal() {\n  const modal = await this.modalController.create({\n     component: NewPage,\n     backdropDismiss:false\n  });\n  modal.onDidDismiss().then(data=>{\n     if(data.data)\n     if(this.apisService.isDefined(data.data.id)){\n        this.items.push(data.data)\n        this.items=this.apisService.sortArray(this.items);\n     }\n  })\n  return await modal.present();\n}\n\n  selectCategory(item){\n    item.expense_category_id=item.id;\n    // if(item.id !=this.category.expense_category_id){\n    //   item.expense_category_id=item.id;\n    //   item.id=this.apisService.makeid(10);\n    // }else{\n    //   item.expense_category_id=item.id;\n    //   item.id=this.category.id;\n    // }\n    this.category= item;  \n    \n  }\n\n updateSelectedCategory(){\n   if(this.apisService.isDefined(this.category.name)){\n      this.modalController.dismiss(this.category);\n   }\n \n }\n   close() { this.modalController.dismiss([]);  }\n\n}\n"]}