{"version":3,"sources":["./src/app/real-estate/listing/real-estate-listing.module.ts","./src/app/real-estate/listing/real-estate-listing.page.html","./src/app/real-estate/listing/real-estate-listing.page.ts","./src/app/real-estate/listing/real-estate-listing.resolver.ts","./src/app/shell/data-store.ts"],"names":[],"mappings":"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","file":"real-estate-listing-real-estate-listing-module-ngfactory-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ComponentsModule } from '../../components/components.module';\n\nimport { RealEstateService } from '../real-estate.service';\nimport { RealEstateListingPage } from './real-estate-listing.page';\nimport { RealEstateListingResolver } from './real-estate-listing.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RealEstateListingPage,\n    resolve: {\n      data: RealEstateListingResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule,\n    HttpClientModule\n  ],\n  declarations: [\n    RealEstateListingPage\n  ],\n  providers: [\n    RealEstateListingResolver,\n    RealEstateService\n  ]\n})\nexport class RealEstateListingPageModule {}\n","<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"app/categories\"></ion-back-button>\n    </ion-buttons>\n    <ion-title>Real Estate Listing</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"real-estate-listing-content\">\n  <div class=\"listing-item\" *ngFor=\"let item of listing.items\">\n    <ion-row class=\"image-row\">\n      <ion-col size=\"12\">\n        <a class=\"image-anchor\" [routerLink]=\"['/app/categories/real-estate/', item.slug]\">\n          <app-image-shell [display]=\"'cover'\" animation=\"spinner\" class=\"item-picture\" [src]=\"item.picture\">\n            <app-aspect-ratio [ratio]=\"{w:365, h:125}\">\n            </app-aspect-ratio>\n          </app-image-shell>\n        </a>\n      </ion-col>\n    </ion-row>\n    <ion-row class=\"description-row\">\n      <ion-col size=\"12\" class=\"details-col\">\n        <ion-row class=\"details-wrapper\">\n          <ion-col>\n            <h4 class=\"item-price\">\n              <span class=\"price-icon\">$</span>\n              <app-text-shell [data]=\"item.price\"></app-text-shell>\n            </h4>\n            <p class=\"item-address\">\n              <app-text-shell [data]=\"item.address\"></app-text-shell>\n            </p>\n          </ion-col>\n          <ion-col class=\"bookmark-col\" size=\"2\">\n            <ion-icon *ngIf=\"item.liked\" class=\"like-icon\" name=\"heart\"></ion-icon>\n            <ion-icon *ngIf=\"!item.liked\" class=\"like-icon\" name=\"heart-outline\"></ion-icon>\n          </ion-col>\n        </ion-row>\n      </ion-col>\n\n      <ion-col class=\"accommodations-col\" size=\"12\">\n        <ion-row class=\"accommodations-wrapper\">\n          <ion-col class=\"item-accommodation\">\n            <ion-icon class=\"accommodation-icon\" src=\"./assets/custom-icons/real-estate/guests.svg\"></ion-icon>\n            <span class=\"accommodation-property\">Guests</span>\n            <span class=\"accommodation-value\">\n              <app-text-shell [data]=\"item.accommodations?.guests\"></app-text-shell>\n            </span>\n          </ion-col>\n          <ion-col class=\"item-accommodation\">\n            <ion-icon class=\"accommodation-icon\" src=\"./assets/custom-icons/real-estate/bedrooms.svg\"></ion-icon>\n            <span class=\"accommodation-property\">Bedrooms</span>\n            <span class=\"accommodation-value\">\n              <app-text-shell [data]=\"item.accommodations?.bedrooms\"></app-text-shell>\n            </span>\n          </ion-col>\n          <ion-col class=\"item-accommodation\">\n            <ion-icon class=\"accommodation-icon\" src=\"./assets/custom-icons/real-estate/bathroom.svg\"></ion-icon>\n            <span class=\"accommodation-property\">Bathrooms</span>\n            <span class=\"accommodation-value\">\n              <app-text-shell [data]=\"item.accommodations?.bathrooms\"></app-text-shell>\n            </span>\n          </ion-col>\n          <ion-col class=\"item-accommodation\">\n            <ion-icon class=\"accommodation-icon\" src=\"./assets/custom-icons/real-estate/patio.svg\"></ion-icon>\n            <span class=\"accommodation-property\">Patios</span>\n            <span class=\"accommodation-value\">\n              <app-text-shell [data]=\"item.accommodations?.patios\"></app-text-shell>\n            </span>\n          </ion-col>\n        </ion-row>\n      </ion-col>\n\n      <ion-col size=\"12\" class=\"amenities-col\" *ngIf=\"item.amenities\">\n        <h5 class=\"amenities-title\">Amenities</h5>\n        <ion-row class=\"amenities-wrapper\">\n          <ng-container>\n            <ion-col class=\"item-amenity\" size=\"4\" *ngFor=\"let amenity of item.amenities.slice(0, 4); let i = index\">\n              <ion-icon *ngIf=\"amenity.icon\" class=\"amenity-icon\" [src]=\"amenity.icon\"></ion-icon>\n              <span class=\"amenity-value\">\n                <app-text-shell [data]=\"amenity.name\"></app-text-shell>\n              </span>\n            </ion-col>\n            <ion-col class=\"has-more-amenities\" *ngIf=\"i == 3 && item.amenities.length > 4\">\n              <span class=\"amenities-count\">+{{ item.amenities.length - 4 }}</span>\n            </ion-col>\n          </ng-container>\n        </ion-row>\n      </ion-col>\n    </ion-row>\n  </div>\n</ion-content>\n","import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { RealEstateListingModel } from './real-estate-listing.model';\n\n@Component({\n  selector: 'app-real-estate-listing',\n  templateUrl: './real-estate-listing.page.html',\n  styleUrls: [\n    './styles/real-estate-listing.page.scss',\n    './styles/real-estate-listing.shell.scss'\n  ]\n})\nexport class RealEstateListingPage implements OnInit {\n  listing: RealEstateListingModel;\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.listing && this.listing.isShell) ? true : false;\n  }\n\n  constructor(private route: ActivatedRoute) { }\n\n  ngOnInit(): void {\n    this.route.data.subscribe((resolvedRouteData) => {\n      const listingDataStore = resolvedRouteData['data'];\n\n      listingDataStore.state.subscribe(\n        (state) => {\n          this.listing = state;\n        },\n        (error) => {}\n      );\n    },\n    (error) => {});\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { DataStore } from '../../shell/data-store';\nimport { RealEstateService } from '../real-estate.service';\nimport { RealEstateListingModel } from './real-estate-listing.model';\n\n@Injectable()\nexport class RealEstateListingResolver implements Resolve<DataStore<RealEstateListingModel>> {\n\n  constructor(private realEstateService: RealEstateService) {}\n\n  resolve(): DataStore<RealEstateListingModel> {\n    const dataSource: Observable<RealEstateListingModel> = this.realEstateService.getListingDataSource();\n    const dataStore: DataStore<RealEstateListingModel> = this.realEstateService.getListingStore(dataSource);\n\n    return dataStore;\n  }\n}\n","import { Observable, of, combineLatest, ReplaySubject } from 'rxjs';\nimport { delay, map, startWith } from 'rxjs/operators';\n\nimport { AppShellConfig } from './config/app-shell.config';\n\nexport class ShellModel {\n  isShell = false;\n}\n\nexport class DataStore<T> {\n  // We wait on purpose 2 secs on local environment when fetching from json to simulate the backend roundtrip.\n  // However, in production you should set this delay to 0 in the assets/config/app-shell.config.prod.json file.\n  // tslint:disable-next-line:max-line-length\n  private networkDelay = (AppShellConfig.settings && AppShellConfig.settings.networkDelay) ? AppShellConfig.settings.networkDelay : 0;\n\n  private timeline: ReplaySubject<T & ShellModel> = new ReplaySubject(1);\n\n  constructor(private shellModel: T) { }\n\n  // Static function with generics\n  // (ref: https://stackoverflow.com/a/24293088/1116959)\n  // Append a shell (T & ShellModel) to every value (T) emmited to the timeline\n  public static AppendShell<T>(dataObservable: Observable<T>, shellModel: T, networkDelay = 400): Observable<T & ShellModel> {\n    const delayObservable = of(true).pipe(\n      delay(networkDelay)\n    );\n\n    // Assign shell flag accordingly\n    // (ref: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n    return combineLatest([\n      delayObservable,\n      dataObservable\n    ]).pipe(\n      // Dismiss unnecessary delayValue\n      map(([delayValue, dataValue]: [boolean, T]): (T & ShellModel) => Object.assign(dataValue, {isShell: false})),\n      // Set the shell model as the initial value\n      startWith(Object.assign(shellModel, {isShell: true}))\n    );\n  }\n\n  load(dataSourceObservable: Observable<T>): void {\n    const dataSourceWithShellObservable = DataStore.AppendShell(dataSourceObservable, this.shellModel, this.networkDelay);\n\n    dataSourceWithShellObservable\n    .subscribe((dataValue: T & ShellModel) => {\n      this.timeline.next(dataValue);\n    });\n  }\n\n  public get state(): Observable<T & ShellModel> {\n    return this.timeline.asObservable();\n  }\n}\n"],"sourceRoot":"webpack:///"}