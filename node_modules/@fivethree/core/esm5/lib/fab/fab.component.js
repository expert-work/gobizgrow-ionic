/**
 * @fileoverview added by tsickle
 * Generated from: lib/fab/fab.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { FivLoadingProgressBar } from './../loading-progress-bar/loading-progress-bar.component';
import { Component, Input, ViewChild, Output, EventEmitter, Renderer2, ContentChild, TemplateRef, Optional } from '@angular/core';
import { animate, style, transition, trigger } from '@angular/animations';
import { FivSpinner } from '../spinner/spinner.component';
import { IonContent, IonLabel, Platform } from '@ionic/angular';
import { Subject } from 'rxjs';
import { takeUntil, tap, filter, repeat, map, pairwise, distinctUntilChanged } from 'rxjs/operators';
var FivFab = /** @class */ (function () {
    function FivFab(renderer, platform, content) {
        this.renderer = renderer;
        this.platform = platform;
        this.content = content;
        this.vertical = 'none';
        this.horizontal = 'none';
        this.mode = 'normal';
        this.spinColor = 'primary';
        this.disabled = false;
        this.visible = true;
        this.pulse = false;
        this.animationDisabled = false;
        this._scroll = false;
        this.fivComplete = new EventEmitter();
        this.fivRefresh = new EventEmitter();
        this.fivHidden = new EventEmitter();
        this.fivShow = new EventEmitter();
        this.fivTransition = new EventEmitter();
        this.loading = false;
        this.extended = false;
        this.iconState = 'normal';
        this.currentDeltaY = 0;
        this.$onDestroy = new Subject();
    }
    Object.defineProperty(FivFab.prototype, "scroll", {
        get: /**
         * @return {?}
         */
        function () {
            return this._scroll;
        },
        set: /**
         * @param {?} scroll
         * @return {?}
         */
        function (scroll) {
            this._scroll = scroll;
            this.$onDestroy.next();
            this.ngOnInit();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FivFab.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.content) {
            return;
        }
        if (!this.scroll) {
            return;
        }
        this.content.scrollEvents = true;
        /** @type {?} */
        var directionChange = this.content.ionScroll.pipe(map((/**
         * @param {?} ev
         * @return {?}
         */
        function (ev) { return ev.detail.deltaY; })), pairwise(), map((/**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var _b = tslib_1.__read(_a, 2), y1 = _b[0], y2 = _b[1];
            return (y2 < y1 ? 'Up' : 'Down');
        })), distinctUntilChanged(), takeUntil(this.content.ionScrollEnd), repeat());
        /** @type {?} */
        var up = directionChange.pipe(filter((/**
         * @param {?} direction
         * @return {?}
         */
        function (direction) { return direction === 'Up'; })));
        /** @type {?} */
        var down = directionChange.pipe(filter((/**
         * @param {?} direction
         * @return {?}
         */
        function (direction) { return direction === 'Down'; })));
        up.pipe(tap((/**
         * @return {?}
         */
        function () {
            return _this.labelComp ? (_this.extended = true) : (_this.visible = true);
        })), takeUntil(this.$onDestroy)).subscribe();
        down
            .pipe(tap((/**
         * @return {?}
         */
        function () {
            return _this.labelComp ? (_this.extended = false) : (_this.visible = false);
        })), takeUntil(this.$onDestroy))
            .subscribe();
    };
    /**
     * @return {?}
     */
    FivFab.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.$onDestroy.next();
    };
    /**
     * @return {?}
     */
    FivFab.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        this.extended = !!this.labelComp;
    };
    /**
     * @return {?}
     */
    FivFab.prototype.load = /**
     * @return {?}
     */
    function () {
        this.loading = true;
        this.fivRefresh.emit(this);
    };
    /**
     * @return {?}
     */
    FivFab.prototype.unload = /**
     * @return {?}
     */
    function () {
        if (this.bar) {
            this.bar.unload();
        }
        this.loading = false;
    };
    /**
     * @return {?}
     */
    FivFab.prototype.complete = /**
     * @return {?}
     */
    function () {
        if (this.loading) {
            if (this.spinner) {
                this.spinner.completeIn(1000);
            }
            else if (this.bar) {
                this.bar.complete();
            }
        }
    };
    /**
     * @return {?}
     */
    FivFab.prototype.fillAnimationDone = /**
     * @return {?}
     */
    function () {
        this.fivComplete.emit(this);
        this.unload();
    };
    /**
     * @param {?} progress
     * @return {?}
     */
    FivFab.prototype.rotate = /**
     * @param {?} progress
     * @return {?}
     */
    function (progress) {
        this.renderer.setStyle(this.spinner._elementRef.nativeElement, 'transform', "rotateZ(" + (progress / 200) * 360 + "deg)");
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FivFab.prototype.fabAnimDone = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (event.fromState === 'void') {
            this.fivShow.emit(this);
        }
        if (event.toState === 'void') {
            this.fivHidden.emit(this);
        }
    };
    FivFab.decorators = [
        { type: Component, args: [{
                    selector: 'fiv-fab',
                    template: "<ion-fab *ngIf=\"visible\" [@.disabled]=\"animationDisabled\" (@fabAnim.done)=\"fabAnimDone($event)\" [@fabAnim]=\"horizontal\"\n  [ngClass]=\"[mode,horizontal,vertical]\" [slot]=\"slot\">\n  <fiv-spinner *ngIf=\"!extended && loading\" (fivProgress)=\"rotate($event)\" #spinner (fivComplete)=\"fillAnimationDone()\"\n    class=\"spinner\" [circleRadius]=\"30\" [diameter]=\"68\" [strokeWidth]=\"4\" [mode]=\"'indeterminate'\">\n  </fiv-spinner>\n\n  <ion-button [ngClass]=\"{'pulse': pulse, 'small':!labelComp || !extended}\" [color]=\"color\" [disabled]=\"disabled\">\n    <fiv-loading-progress-bar *ngIf=\"extended\" [loading]=\"loading\" (fivComplete)=\"fillAnimationDone()\" #bar>\n    </fiv-loading-progress-bar>\n    <ng-content select=\"fiv-icon\"></ng-content>\n    <ng-content select=\"ion-icon\"></ng-content>\n    <div [@labelAnim] *ngIf=\"labelComp && extended\">\n      <ng-content select=\"ion-label\"></ng-content>\n    </div>\n  </ion-button>\n</ion-fab>",
                    animations: [
                        trigger('fabAnim', [
                            transition('void => center', [
                                style({
                                    transform: 'translateX(-50%) scale(0) '
                                }),
                                animate('250ms ease', style({ transform: 'translateX(-50%) scale(1)' }))
                            ]),
                            transition('center => void', [
                                style({
                                    transform: 'translateX(-50%) scale(1) '
                                }),
                                animate('250ms ease', style({ transform: ' translateX(-50%) scale(0)' }))
                            ]),
                            transition('void => *', [
                                style({
                                    transform: 'scale(0)'
                                }),
                                animate('250ms ease', style({
                                    transform: 'scale(1)'
                                }))
                            ]),
                            transition('* => void', [
                                style({
                                    transform: 'scale(1)'
                                }),
                                animate('250ms ease', style({
                                    transform: 'scale(0)'
                                }))
                            ])
                        ]),
                        trigger('labelAnim', [
                            transition('void => *', [
                                style({ width: '0', opacity: 0 }),
                                animate('140ms', style({ width: '*', opacity: 1 }))
                            ]),
                            transition('* => void', [
                                style({ width: '*', opacity: 1 }),
                                animate('120ms', style({ width: 0, opacity: 0 }))
                            ])
                        ])
                    ],
                    styles: [":host{--fiv-fab-size:56px;--fiv-spinner-size:calc(var(--fiv-fab-size) + 12px);--fiv-fab-bottom:calc(10px + env(safe-area-inset-bottom));--fiv-fab-top:calc(10px + env(safe-area-inset-top));--background-fab-progress-bar:var(--ion-color-primary);--background-fab-progress:var(--ion-color-primary-shade);position:inherit}fiv-loading-progress-bar{--background-progress-bar:var(--background-fab-progress-bar);--background-progress:var(--background-fab-progress)}:host(.button-disabled){pointer-events:none}::ng-deep ng-deep fiv-icon.ios{--fiv-icon-height:24px;--fiv-icon-width:24px}::ng-deep fiv-icon:not(.ios){--fiv-icon-height:25px;--fiv-icon-width:25px}ion-button{--border-radius:calc(var(--fiv-fab-size) / 2);height:var(--fiv-fab-size);min-width:var(--fiv-fab-size);-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:0;margin-inline-end:0;margin:0}ion-fab.top{top:var(--fiv-fab-top)}ion-fab.top.edge{top:calc(var(--fiv-fab-top) - 38px)}ion-fab.middle{top:calc(50% - var(--fiv-spinner-size))}ion-fab.bottom.edge{bottom:calc(var(--fiv-fab-bottom) - 38px)}ion-fab.bottom{bottom:var(--fiv-fab-bottom)}ion-fab.center{left:50%;transform:translateX(-50%)}ion-fab.start{left:10px}ion-fab.end{right:calc(10px + var(--ion-safe-area-right,0px))}.pulse{-webkit-animation:1.2s infinite shadow-pulse;animation:1.2s infinite shadow-pulse}fiv-spinner{position:absolute;left:calc((var(--fiv-spinner-size) - var(--fiv-fab-size))/ -2);top:calc((var(--fiv-spinner-size) - var(--fiv-fab-size))/ -2)}@-webkit-keyframes shadow-pulse{0%{border-radius:calc(var(--fiv-spinner-size)/ 2);box-shadow:0 0 0 0 rgba(0,0,0,.2)}100%{border-radius:calc(var(--fiv-spinner-size)/ 2);box-shadow:0 0 0 28px transparent}}@keyframes shadow-pulse{0%{border-radius:calc(var(--fiv-spinner-size)/ 2);box-shadow:0 0 0 0 rgba(0,0,0,.2)}100%{border-radius:calc(var(--fiv-spinner-size)/ 2);box-shadow:0 0 0 28px transparent}}"]
                }] }
    ];
    /** @nocollapse */
    FivFab.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: Platform },
        { type: IonContent, decorators: [{ type: Optional }] }
    ]; };
    FivFab.propDecorators = {
        vertical: [{ type: Input }],
        horizontal: [{ type: Input }],
        mode: [{ type: Input }],
        slot: [{ type: Input }],
        spinColor: [{ type: Input }],
        color: [{ type: Input }],
        disabled: [{ type: Input }],
        visible: [{ type: Input }],
        pulse: [{ type: Input }],
        animationDisabled: [{ type: Input }],
        scroll: [{ type: Input }],
        feature: [{ type: Input }],
        fivComplete: [{ type: Output }],
        fivRefresh: [{ type: Output }],
        fivHidden: [{ type: Output }],
        fivShow: [{ type: Output }],
        fivTransition: [{ type: Output }],
        spinner: [{ type: ViewChild, args: ['spinner', { static: false },] }],
        bar: [{ type: ViewChild, args: ['bar', { static: false },] }],
        labelComp: [{ type: ContentChild, args: [IonLabel, { static: false },] }]
    };
    return FivFab;
}());
export { FivFab };
if (false) {
    /** @type {?} */
    FivFab.prototype.vertical;
    /** @type {?} */
    FivFab.prototype.horizontal;
    /** @type {?} */
    FivFab.prototype.mode;
    /** @type {?} */
    FivFab.prototype.slot;
    /** @type {?} */
    FivFab.prototype.spinColor;
    /** @type {?} */
    FivFab.prototype.color;
    /** @type {?} */
    FivFab.prototype.disabled;
    /** @type {?} */
    FivFab.prototype.visible;
    /** @type {?} */
    FivFab.prototype.pulse;
    /** @type {?} */
    FivFab.prototype.animationDisabled;
    /** @type {?} */
    FivFab.prototype._scroll;
    /** @type {?} */
    FivFab.prototype.feature;
    /** @type {?} */
    FivFab.prototype.fivComplete;
    /** @type {?} */
    FivFab.prototype.fivRefresh;
    /** @type {?} */
    FivFab.prototype.fivHidden;
    /** @type {?} */
    FivFab.prototype.fivShow;
    /** @type {?} */
    FivFab.prototype.fivTransition;
    /** @type {?} */
    FivFab.prototype.spinner;
    /** @type {?} */
    FivFab.prototype.bar;
    /** @type {?} */
    FivFab.prototype.labelComp;
    /** @type {?} */
    FivFab.prototype.loading;
    /** @type {?} */
    FivFab.prototype.extended;
    /** @type {?} */
    FivFab.prototype.iconState;
    /** @type {?} */
    FivFab.prototype.currentDeltaY;
    /** @type {?} */
    FivFab.prototype.$onDestroy;
    /**
     * @type {?}
     * @private
     */
    FivFab.prototype.renderer;
    /** @type {?} */
    FivFab.prototype.platform;
    /**
     * @type {?}
     * @private
     */
    FivFab.prototype.content;
}
/**
 * @record
 */
export function FabTransitionEvent() { }
if (false) {
    /** @type {?} */
    FabTransitionEvent.prototype.from;
    /** @type {?} */
    FabTransitionEvent.prototype.to;
}
/** @enum {number} */
var FabState = {
    HIDDEN: 0,
    NORMAL: 1,
    EXTENDED: 2,
};
export { FabState };
FabState[FabState.HIDDEN] = 'HIDDEN';
FabState[FabState.NORMAL] = 'NORMAL';
FabState[FabState.EXTENDED] = 'EXTENDED';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFiLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmaXZldGhyZWUvY29yZS8iLCJzb3VyY2VzIjpbImxpYi9mYWIvZmFiLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQUNqRyxPQUFPLEVBQ0wsU0FBUyxFQUVULEtBQUssRUFDTCxTQUFTLEVBQ1QsTUFBTSxFQUNOLFlBQVksRUFDWixTQUFTLEVBRVQsWUFBWSxFQUVaLFdBQVcsRUFDWCxRQUFRLEVBQ1QsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUNMLE9BQU8sRUFDUCxLQUFLLEVBQ0wsVUFBVSxFQUNWLE9BQU8sRUFFUixNQUFNLHFCQUFxQixDQUFDO0FBQzdCLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNoRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQy9CLE9BQU8sRUFDTCxTQUFTLEVBQ1QsR0FBRyxFQUNILE1BQU0sRUFDTixNQUFNLEVBQ04sR0FBRyxFQUNILFFBQVEsRUFDUixvQkFBb0IsRUFDckIsTUFBTSxnQkFBZ0IsQ0FBQztBQUV4QjtJQThGRSxnQkFDVSxRQUFtQixFQUNwQixRQUFrQixFQUNMLE9BQW1CO1FBRi9CLGFBQVEsR0FBUixRQUFRLENBQVc7UUFDcEIsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUNMLFlBQU8sR0FBUCxPQUFPLENBQVk7UUF4Q2hDLGFBQVEsR0FBMEMsTUFBTSxDQUFDO1FBQ3pELGVBQVUsR0FBeUMsTUFBTSxDQUFDO1FBQzFELFNBQUksR0FBdUIsUUFBUSxDQUFDO1FBRXBDLGNBQVMsR0FBRyxTQUFTLENBQUM7UUFFdEIsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQixZQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ2YsVUFBSyxHQUFHLEtBQUssQ0FBQztRQUNkLHNCQUFpQixHQUFHLEtBQUssQ0FBQztRQVNuQyxZQUFPLEdBQUcsS0FBSyxDQUFDO1FBR04sZ0JBQVcsR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUMvRCxlQUFVLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFDOUQsY0FBUyxHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO1FBQzdELFlBQU8sR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUMzRCxrQkFBYSxHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO1FBTTNFLFlBQU8sR0FBRyxLQUFLLENBQUM7UUFDaEIsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQixjQUFTLEdBQUcsUUFBUSxDQUFDO1FBQ3JCLGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLGVBQVUsR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO0lBTXhCLENBQUM7SUEvQkosc0JBQWEsMEJBQU07Ozs7UUFLbkI7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDdEIsQ0FBQzs7Ozs7UUFQRCxVQUFvQixNQUFlO1lBQ2pDLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1lBQ3RCLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDdkIsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2xCLENBQUM7OztPQUFBOzs7O0lBNkJELHlCQUFROzs7SUFBUjtRQUFBLGlCQXdDQztRQXZDQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNqQixPQUFPO1NBQ1I7UUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNoQixPQUFPO1NBQ1I7UUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7O1lBRTNCLGVBQWUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQ2pELEdBQUc7Ozs7UUFBQyxVQUFBLEVBQUUsSUFBSSxPQUFBLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFoQixDQUFnQixFQUFDLEVBQzNCLFFBQVEsRUFBRSxFQUNWLEdBQUc7Ozs7UUFBQyxVQUFDLEVBQVE7Z0JBQVIsMEJBQVEsRUFBUCxVQUFFLEVBQUUsVUFBRTtZQUFNLE9BQUEsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztRQUF6QixDQUF5QixFQUFDLEVBQzVDLG9CQUFvQixFQUFFLEVBQ3RCLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUNwQyxNQUFNLEVBQUUsQ0FDVDs7WUFFSyxFQUFFLEdBQUcsZUFBZSxDQUFDLElBQUksQ0FBQyxNQUFNOzs7O1FBQUMsVUFBQSxTQUFTLElBQUksT0FBQSxTQUFTLEtBQUssSUFBSSxFQUFsQixDQUFrQixFQUFDLENBQUM7O1lBRWxFLElBQUksR0FBRyxlQUFlLENBQUMsSUFBSSxDQUMvQixNQUFNOzs7O1FBQUMsVUFBQSxTQUFTLElBQUksT0FBQSxTQUFTLEtBQUssTUFBTSxFQUFwQixDQUFvQixFQUFDLENBQzFDO1FBRUQsRUFBRSxDQUFDLElBQUksQ0FDTCxHQUFHOzs7UUFBQztZQUNGLE9BQUEsS0FBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQS9ELENBQStELEVBQ2hFLEVBQ0QsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FDM0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUVkLElBQUk7YUFDRCxJQUFJLENBQ0gsR0FBRzs7O1FBQUM7WUFDRixPQUFBLEtBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztRQUFqRSxDQUFpRSxFQUNsRSxFQUNELFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQzNCO2FBQ0EsU0FBUyxFQUFFLENBQUM7SUFDakIsQ0FBQzs7OztJQUVELDRCQUFXOzs7SUFBWDtRQUNFLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDekIsQ0FBQzs7OztJQUVELG1DQUFrQjs7O0lBQWxCO1FBQ0UsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUNuQyxDQUFDOzs7O0lBRUQscUJBQUk7OztJQUFKO1FBQ0UsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7UUFDcEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0IsQ0FBQzs7OztJQUVELHVCQUFNOzs7SUFBTjtRQUNFLElBQUksSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUNaLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDbkI7UUFDRCxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztJQUN2QixDQUFDOzs7O0lBRUQseUJBQVE7OztJQUFSO1FBQ0UsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2hCLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtnQkFDaEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDL0I7aUJBQU0sSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFO2dCQUNuQixJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDO2FBQ3JCO1NBQ0Y7SUFDSCxDQUFDOzs7O0lBRUQsa0NBQWlCOzs7SUFBakI7UUFDRSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQzs7Ozs7SUFFRCx1QkFBTTs7OztJQUFOLFVBQU8sUUFBZ0I7UUFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQ3BCLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLGFBQWEsRUFDdEMsV0FBVyxFQUNYLGFBQVcsQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxTQUFNLENBQ3hDLENBQUM7SUFDSixDQUFDOzs7OztJQUVELDRCQUFXOzs7O0lBQVgsVUFBWSxLQUFLO1FBQ2YsSUFBSSxLQUFLLENBQUMsU0FBUyxLQUFLLE1BQU0sRUFBRTtZQUM5QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUN6QjtRQUVELElBQUksS0FBSyxDQUFDLE9BQU8sS0FBSyxNQUFNLEVBQUU7WUFDNUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDM0I7SUFDSCxDQUFDOztnQkFqTUYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxTQUFTO29CQUNuQixzOUJBQW1DO29CQUVuQyxVQUFVLEVBQUU7d0JBQ1YsT0FBTyxDQUFDLFNBQVMsRUFBRTs0QkFDakIsVUFBVSxDQUFDLGdCQUFnQixFQUFFO2dDQUMzQixLQUFLLENBQUM7b0NBQ0osU0FBUyxFQUFFLDRCQUE0QjtpQ0FDeEMsQ0FBQztnQ0FDRixPQUFPLENBQUMsWUFBWSxFQUFFLEtBQUssQ0FBQyxFQUFFLFNBQVMsRUFBRSwyQkFBMkIsRUFBRSxDQUFDLENBQUM7NkJBQ3pFLENBQUM7NEJBQ0YsVUFBVSxDQUFDLGdCQUFnQixFQUFFO2dDQUMzQixLQUFLLENBQUM7b0NBQ0osU0FBUyxFQUFFLDRCQUE0QjtpQ0FDeEMsQ0FBQztnQ0FDRixPQUFPLENBQ0wsWUFBWSxFQUNaLEtBQUssQ0FBQyxFQUFFLFNBQVMsRUFBRSw0QkFBNEIsRUFBRSxDQUFDLENBQ25EOzZCQUNGLENBQUM7NEJBQ0YsVUFBVSxDQUFDLFdBQVcsRUFBRTtnQ0FDdEIsS0FBSyxDQUFDO29DQUNKLFNBQVMsRUFBRSxVQUFVO2lDQUN0QixDQUFDO2dDQUNGLE9BQU8sQ0FDTCxZQUFZLEVBQ1osS0FBSyxDQUFDO29DQUNKLFNBQVMsRUFBRSxVQUFVO2lDQUN0QixDQUFDLENBQ0g7NkJBQ0YsQ0FBQzs0QkFDRixVQUFVLENBQUMsV0FBVyxFQUFFO2dDQUN0QixLQUFLLENBQUM7b0NBQ0osU0FBUyxFQUFFLFVBQVU7aUNBQ3RCLENBQUM7Z0NBQ0YsT0FBTyxDQUNMLFlBQVksRUFDWixLQUFLLENBQUM7b0NBQ0osU0FBUyxFQUFFLFVBQVU7aUNBQ3RCLENBQUMsQ0FDSDs2QkFDRixDQUFDO3lCQUNILENBQUM7d0JBQ0YsT0FBTyxDQUFDLFdBQVcsRUFBRTs0QkFDbkIsVUFBVSxDQUFDLFdBQVcsRUFBRTtnQ0FDdEIsS0FBSyxDQUFDLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUM7Z0NBQ2pDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQzs2QkFDcEQsQ0FBQzs0QkFDRixVQUFVLENBQUMsV0FBVyxFQUFFO2dDQUN0QixLQUFLLENBQUMsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQztnQ0FDakMsT0FBTyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDOzZCQUNsRCxDQUFDO3lCQUNILENBQUM7cUJBQ0g7O2lCQUNGOzs7O2dCQWxGQyxTQUFTO2dCQWVvQixRQUFRO2dCQUE5QixVQUFVLHVCQTZHZCxRQUFROzs7MkJBeENWLEtBQUs7NkJBQ0wsS0FBSzt1QkFDTCxLQUFLO3VCQUNMLEtBQUs7NEJBQ0wsS0FBSzt3QkFDTCxLQUFLOzJCQUNMLEtBQUs7MEJBQ0wsS0FBSzt3QkFDTCxLQUFLO29DQUNMLEtBQUs7eUJBQ0wsS0FBSzswQkFTTCxLQUFLOzhCQUVMLE1BQU07NkJBQ04sTUFBTTs0QkFDTixNQUFNOzBCQUNOLE1BQU07Z0NBQ04sTUFBTTswQkFFTixTQUFTLFNBQUMsU0FBUyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtzQkFDdEMsU0FBUyxTQUFDLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7NEJBQ2xDLFlBQVksU0FBQyxRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFOztJQTRHM0MsYUFBQztDQUFBLEFBbE1ELElBa01DO1NBMUlZLE1BQU07OztJQUNqQiwwQkFBa0U7O0lBQ2xFLDRCQUFtRTs7SUFDbkUsc0JBQTZDOztJQUM3QyxzQkFBc0I7O0lBQ3RCLDJCQUErQjs7SUFDL0IsdUJBQXVCOztJQUN2QiwwQkFBMEI7O0lBQzFCLHlCQUF3Qjs7SUFDeEIsdUJBQXVCOztJQUN2QixtQ0FBbUM7O0lBU25DLHlCQUFnQjs7SUFDaEIseUJBQW1DOztJQUVuQyw2QkFBeUU7O0lBQ3pFLDRCQUF3RTs7SUFDeEUsMkJBQXVFOztJQUN2RSx5QkFBcUU7O0lBQ3JFLCtCQUEyRTs7SUFFM0UseUJBQTZEOztJQUM3RCxxQkFBZ0U7O0lBQ2hFLDJCQUErRDs7SUFFL0QseUJBQWdCOztJQUNoQiwwQkFBaUI7O0lBQ2pCLDJCQUFxQjs7SUFDckIsK0JBQWtCOztJQUNsQiw0QkFBMkI7Ozs7O0lBR3pCLDBCQUEyQjs7SUFDM0IsMEJBQXlCOzs7OztJQUN6Qix5QkFBdUM7Ozs7O0FBbUczQyx3Q0FHQzs7O0lBRkMsa0NBQWU7O0lBQ2YsZ0NBQWE7OztBQUdmLElBQVksUUFBUTtJQUNsQixNQUFNLEdBQUE7SUFDTixNQUFNLEdBQUE7SUFDTixRQUFRLEdBQUE7RUFDVCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZpdkxvYWRpbmdQcm9ncmVzc0JhciB9IGZyb20gJy4vLi4vbG9hZGluZy1wcm9ncmVzcy1iYXIvbG9hZGluZy1wcm9ncmVzcy1iYXIuY29tcG9uZW50JztcbmltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgT25Jbml0LFxuICBJbnB1dCxcbiAgVmlld0NoaWxkLFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgUmVuZGVyZXIyLFxuICBPbkRlc3Ryb3ksXG4gIENvbnRlbnRDaGlsZCxcbiAgQWZ0ZXJDb250ZW50SW5pdCxcbiAgVGVtcGxhdGVSZWYsXG4gIE9wdGlvbmFsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgYW5pbWF0ZSxcbiAgc3R5bGUsXG4gIHRyYW5zaXRpb24sXG4gIHRyaWdnZXIsXG4gIHN0YXRlXG59IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHsgRml2U3Bpbm5lciB9IGZyb20gJy4uL3NwaW5uZXIvc3Bpbm5lci5jb21wb25lbnQnO1xuaW1wb3J0IHsgSW9uQ29udGVudCwgSW9uTGFiZWwsIFBsYXRmb3JtIH0gZnJvbSAnQGlvbmljL2FuZ3VsYXInO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtcbiAgdGFrZVVudGlsLFxuICB0YXAsXG4gIGZpbHRlcixcbiAgcmVwZWF0LFxuICBtYXAsXG4gIHBhaXJ3aXNlLFxuICBkaXN0aW5jdFVudGlsQ2hhbmdlZFxufSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Zpdi1mYWInLFxuICB0ZW1wbGF0ZVVybDogJy4vZmFiLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vZmFiLmNvbXBvbmVudC5zY3NzJ10sXG4gIGFuaW1hdGlvbnM6IFtcbiAgICB0cmlnZ2VyKCdmYWJBbmltJywgW1xuICAgICAgdHJhbnNpdGlvbigndm9pZCA9PiBjZW50ZXInLCBbXG4gICAgICAgIHN0eWxlKHtcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC01MCUpIHNjYWxlKDApICdcbiAgICAgICAgfSksXG4gICAgICAgIGFuaW1hdGUoJzI1MG1zIGVhc2UnLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSkgc2NhbGUoMSknIH0pKVxuICAgICAgXSksXG4gICAgICB0cmFuc2l0aW9uKCdjZW50ZXIgPT4gdm9pZCcsIFtcbiAgICAgICAgc3R5bGUoe1xuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSkgc2NhbGUoMSkgJ1xuICAgICAgICB9KSxcbiAgICAgICAgYW5pbWF0ZShcbiAgICAgICAgICAnMjUwbXMgZWFzZScsXG4gICAgICAgICAgc3R5bGUoeyB0cmFuc2Zvcm06ICcgdHJhbnNsYXRlWCgtNTAlKSBzY2FsZSgwKScgfSlcbiAgICAgICAgKVxuICAgICAgXSksXG4gICAgICB0cmFuc2l0aW9uKCd2b2lkID0+IConLCBbXG4gICAgICAgIHN0eWxlKHtcbiAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgwKSdcbiAgICAgICAgfSksXG4gICAgICAgIGFuaW1hdGUoXG4gICAgICAgICAgJzI1MG1zIGVhc2UnLFxuICAgICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDEpJ1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIF0pLFxuICAgICAgdHJhbnNpdGlvbignKiA9PiB2b2lkJywgW1xuICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMSknXG4gICAgICAgIH0pLFxuICAgICAgICBhbmltYXRlKFxuICAgICAgICAgICcyNTBtcyBlYXNlJyxcbiAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgwKSdcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICBdKVxuICAgIF0pLFxuICAgIHRyaWdnZXIoJ2xhYmVsQW5pbScsIFtcbiAgICAgIHRyYW5zaXRpb24oJ3ZvaWQgPT4gKicsIFtcbiAgICAgICAgc3R5bGUoeyB3aWR0aDogJzAnLCBvcGFjaXR5OiAwIH0pLFxuICAgICAgICBhbmltYXRlKCcxNDBtcycsIHN0eWxlKHsgd2lkdGg6ICcqJywgb3BhY2l0eTogMSB9KSlcbiAgICAgIF0pLFxuICAgICAgdHJhbnNpdGlvbignKiA9PiB2b2lkJywgW1xuICAgICAgICBzdHlsZSh7IHdpZHRoOiAnKicsIG9wYWNpdHk6IDEgfSksXG4gICAgICAgIGFuaW1hdGUoJzEyMG1zJywgc3R5bGUoeyB3aWR0aDogMCwgb3BhY2l0eTogMCB9KSlcbiAgICAgIF0pXG4gICAgXSlcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBGaXZGYWIgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJDb250ZW50SW5pdCB7XG4gIEBJbnB1dCgpIHZlcnRpY2FsPzogJ3RvcCcgfCAnbWlkZGxlJyB8ICdib3R0b20nIHwgJ25vbmUnID0gJ25vbmUnO1xuICBASW5wdXQoKSBob3Jpem9udGFsPzogJ2NlbnRlcicgfCAnc3RhcnQnIHwgJ2VuZCcgfCAnbm9uZScgPSAnbm9uZSc7XG4gIEBJbnB1dCgpIG1vZGU/OiAnbm9ybWFsJyB8ICdlZGdlJyA9ICdub3JtYWwnO1xuICBASW5wdXQoKSBzbG90OiBzdHJpbmc7XG4gIEBJbnB1dCgpIHNwaW5Db2xvciA9ICdwcmltYXJ5JztcbiAgQElucHV0KCkgY29sb3I6IHN0cmluZztcbiAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcbiAgQElucHV0KCkgdmlzaWJsZSA9IHRydWU7XG4gIEBJbnB1dCgpIHB1bHNlID0gZmFsc2U7XG4gIEBJbnB1dCgpIGFuaW1hdGlvbkRpc2FibGVkID0gZmFsc2U7XG4gIEBJbnB1dCgpIHNldCBzY3JvbGwoc2Nyb2xsOiBib29sZWFuKSB7XG4gICAgdGhpcy5fc2Nyb2xsID0gc2Nyb2xsO1xuICAgIHRoaXMuJG9uRGVzdHJveS5uZXh0KCk7XG4gICAgdGhpcy5uZ09uSW5pdCgpO1xuICB9XG4gIGdldCBzY3JvbGwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Njcm9sbDtcbiAgfVxuICBfc2Nyb2xsID0gZmFsc2U7XG4gIEBJbnB1dCgpIGZlYXR1cmU6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgQE91dHB1dCgpIGZpdkNvbXBsZXRlOiBFdmVudEVtaXR0ZXI8Rml2RmFiPiA9IG5ldyBFdmVudEVtaXR0ZXI8Rml2RmFiPigpO1xuICBAT3V0cHV0KCkgZml2UmVmcmVzaDogRXZlbnRFbWl0dGVyPEZpdkZhYj4gPSBuZXcgRXZlbnRFbWl0dGVyPEZpdkZhYj4oKTtcbiAgQE91dHB1dCgpIGZpdkhpZGRlbjogRXZlbnRFbWl0dGVyPEZpdkZhYj4gPSBuZXcgRXZlbnRFbWl0dGVyPEZpdkZhYj4oKTtcbiAgQE91dHB1dCgpIGZpdlNob3c6IEV2ZW50RW1pdHRlcjxGaXZGYWI+ID0gbmV3IEV2ZW50RW1pdHRlcjxGaXZGYWI+KCk7XG4gIEBPdXRwdXQoKSBmaXZUcmFuc2l0aW9uOiBFdmVudEVtaXR0ZXI8Rml2RmFiPiA9IG5ldyBFdmVudEVtaXR0ZXI8Rml2RmFiPigpO1xuXG4gIEBWaWV3Q2hpbGQoJ3NwaW5uZXInLCB7IHN0YXRpYzogZmFsc2UgfSkgc3Bpbm5lcjogRml2U3Bpbm5lcjtcbiAgQFZpZXdDaGlsZCgnYmFyJywgeyBzdGF0aWM6IGZhbHNlIH0pIGJhcjogRml2TG9hZGluZ1Byb2dyZXNzQmFyO1xuICBAQ29udGVudENoaWxkKElvbkxhYmVsLCB7IHN0YXRpYzogZmFsc2UgfSkgbGFiZWxDb21wOiBJb25MYWJlbDtcblxuICBsb2FkaW5nID0gZmFsc2U7XG4gIGV4dGVuZGVkID0gZmFsc2U7XG4gIGljb25TdGF0ZSA9ICdub3JtYWwnO1xuICBjdXJyZW50RGVsdGFZID0gMDtcbiAgJG9uRGVzdHJveSA9IG5ldyBTdWJqZWN0KCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxuICAgIHB1YmxpYyBwbGF0Zm9ybTogUGxhdGZvcm0sXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBjb250ZW50OiBJb25Db250ZW50XG4gICkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5zY3JvbGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jb250ZW50LnNjcm9sbEV2ZW50cyA9IHRydWU7XG5cbiAgICBjb25zdCBkaXJlY3Rpb25DaGFuZ2UgPSB0aGlzLmNvbnRlbnQuaW9uU2Nyb2xsLnBpcGUoXG4gICAgICBtYXAoZXYgPT4gZXYuZGV0YWlsLmRlbHRhWSksXG4gICAgICBwYWlyd2lzZSgpLFxuICAgICAgbWFwKChbeTEsIHkyXSkgPT4gKHkyIDwgeTEgPyAnVXAnIDogJ0Rvd24nKSksXG4gICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxuICAgICAgdGFrZVVudGlsKHRoaXMuY29udGVudC5pb25TY3JvbGxFbmQpLFxuICAgICAgcmVwZWF0KClcbiAgICApO1xuXG4gICAgY29uc3QgdXAgPSBkaXJlY3Rpb25DaGFuZ2UucGlwZShmaWx0ZXIoZGlyZWN0aW9uID0+IGRpcmVjdGlvbiA9PT0gJ1VwJykpO1xuXG4gICAgY29uc3QgZG93biA9IGRpcmVjdGlvbkNoYW5nZS5waXBlKFxuICAgICAgZmlsdGVyKGRpcmVjdGlvbiA9PiBkaXJlY3Rpb24gPT09ICdEb3duJylcbiAgICApO1xuXG4gICAgdXAucGlwZShcbiAgICAgIHRhcCgoKSA9PlxuICAgICAgICB0aGlzLmxhYmVsQ29tcCA/ICh0aGlzLmV4dGVuZGVkID0gdHJ1ZSkgOiAodGhpcy52aXNpYmxlID0gdHJ1ZSlcbiAgICAgICksXG4gICAgICB0YWtlVW50aWwodGhpcy4kb25EZXN0cm95KVxuICAgICkuc3Vic2NyaWJlKCk7XG5cbiAgICBkb3duXG4gICAgICAucGlwZShcbiAgICAgICAgdGFwKCgpID0+XG4gICAgICAgICAgdGhpcy5sYWJlbENvbXAgPyAodGhpcy5leHRlbmRlZCA9IGZhbHNlKSA6ICh0aGlzLnZpc2libGUgPSBmYWxzZSlcbiAgICAgICAgKSxcbiAgICAgICAgdGFrZVVudGlsKHRoaXMuJG9uRGVzdHJveSlcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuJG9uRGVzdHJveS5uZXh0KCk7XG4gIH1cblxuICBuZ0FmdGVyQ29udGVudEluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5leHRlbmRlZCA9ICEhdGhpcy5sYWJlbENvbXA7XG4gIH1cblxuICBsb2FkKCkge1xuICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgdGhpcy5maXZSZWZyZXNoLmVtaXQodGhpcyk7XG4gIH1cblxuICB1bmxvYWQoKSB7XG4gICAgaWYgKHRoaXMuYmFyKSB7XG4gICAgICB0aGlzLmJhci51bmxvYWQoKTtcbiAgICB9XG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gIH1cblxuICBjb21wbGV0ZSgpIHtcbiAgICBpZiAodGhpcy5sb2FkaW5nKSB7XG4gICAgICBpZiAodGhpcy5zcGlubmVyKSB7XG4gICAgICAgIHRoaXMuc3Bpbm5lci5jb21wbGV0ZUluKDEwMDApO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmJhcikge1xuICAgICAgICB0aGlzLmJhci5jb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZpbGxBbmltYXRpb25Eb25lKCkge1xuICAgIHRoaXMuZml2Q29tcGxldGUuZW1pdCh0aGlzKTtcbiAgICB0aGlzLnVubG9hZCgpO1xuICB9XG5cbiAgcm90YXRlKHByb2dyZXNzOiBudW1iZXIpIHtcbiAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgICAgdGhpcy5zcGlubmVyLl9lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAndHJhbnNmb3JtJyxcbiAgICAgIGByb3RhdGVaKCR7KHByb2dyZXNzIC8gMjAwKSAqIDM2MH1kZWcpYFxuICAgICk7XG4gIH1cblxuICBmYWJBbmltRG9uZShldmVudCkge1xuICAgIGlmIChldmVudC5mcm9tU3RhdGUgPT09ICd2b2lkJykge1xuICAgICAgdGhpcy5maXZTaG93LmVtaXQodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnRvU3RhdGUgPT09ICd2b2lkJykge1xuICAgICAgdGhpcy5maXZIaWRkZW4uZW1pdCh0aGlzKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBGYWJUcmFuc2l0aW9uRXZlbnQge1xuICBmcm9tOiBGYWJTdGF0ZTtcbiAgdG86IEZhYlN0YXRlO1xufVxuXG5leHBvcnQgZW51bSBGYWJTdGF0ZSB7XG4gIEhJRERFTixcbiAgTk9STUFMLFxuICBFWFRFTkRFRFxufVxuIl19